<!doctype html>
<html class="no-js" lang="">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="x-ua-compatible" content="ie=edge">
        <title>wm-devops-console documentation</title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <link rel="icon" type="image/x-icon" href="../images/favicon.ico">
	      <link rel="stylesheet" href="../styles/style.css">
    </head>
    <body>

        <div class="navbar navbar-default navbar-fixed-top visible-xs">
            <a href="../" class="navbar-brand">wm-devops-console documentation</a>
            <button type="button" class="btn btn-default btn-menu ion-ios-menu" id="btn-menu"></button>
        </div>

        <div class="xs-menu menu" id="mobile-menu">
                <div id="book-search-input" role="search"><input type="text" placeholder="Type to search"></div>            <compodoc-menu></compodoc-menu>
        </div>

        <div class="container-fluid main">
           <div class="row main">
               <div class="hidden-xs menu">
                   <compodoc-menu mode="normal"></compodoc-menu>
               </div>
               <!-- START CONTENT -->
               <div class="content class">
                   <div class="content-data">











<ol class="breadcrumb">
  <li>Classes</li>
  <li>Authentication</li>
</ol>

<ul class="nav nav-tabs" role="tablist">
        <li class="active">
            <a href="#info" role="tab" id="info-tab" data-toggle="tab" data-link="info">Info</a>
        </li>
        <li >
            <a href="#source" role="tab" id="source-tab" data-toggle="tab" data-link="source">Source</a>
        </li>
</ul>

<div class="tab-content">
    <div class="tab-pane fade active in" id="c-info">
        <p class="comment">
            <h3>File</h3>
        </p>
        <p class="comment">
            <code>src/app/models/project.ts</code>
        </p>





            <section>
    <h3 id="index">Index</h3>
    <table class="table table-sm table-bordered index-table">
        <tbody>
                <tr>
                    <td class="col-md-4">
                        <h6><b>Properties</b></h6>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <ul class="index-list">
                            <li>
                                    <span class="modifier">Public</span>
                                <a href="#password">password</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                <a href="#type">type</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                <a href="#user">user</a>
                            </li>
                        </ul>
                    </td>
                </tr>

                <tr>
                    <td class="col-md-4">
                        <h6><b>Methods</b></h6>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <ul class="index-list">
                            <li>
                                    <span class="modifier">Static</span>
                                <a href="#make">make</a>
                            </li>
                        </ul>
                    </td>
                </tr>





        </tbody>
    </table>
</section>

            <section>
    <h3 id="constructor">Constructor</h3>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
<code>constructor()</code>
                    </td>
                </tr>
                        <tr>
                            <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="804" class="link-to-prism">src/app/models/project.ts:804</a></div>
                            </td>
                        </tr>

            </tbody>
        </table>
</section>

            <section>
    
        <h3 id="inputs">
            Properties
        </h3>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="password"></a>
                        <span class="name">
                            <b>
                                <span class="modifier">Public</span>
                            password</b>
                            <a href="#password"><span class="icon ion-ios-link"></span></a>
                        </span>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                            <i>Type : </i>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>

                        </td>
                    </tr>
                        <tr>
                            <td class="col-md-4">
                                    <div class="io-line">Defined in <a href="" data-line="804" class="link-to-prism">src/app/models/project.ts:804</a></div>
                            </td>
                        </tr>


            </tbody>
        </table>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="type"></a>
                        <span class="name">
                            <b>
                                <span class="modifier">Public</span>
                            type</b>
                            <a href="#type"><span class="icon ion-ios-link"></span></a>
                        </span>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                            <i>Type : </i>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>

                        </td>
                    </tr>
                        <tr>
                            <td class="col-md-4">
                                    <div class="io-line">Defined in <a href="" data-line="802" class="link-to-prism">src/app/models/project.ts:802</a></div>
                            </td>
                        </tr>


            </tbody>
        </table>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="user"></a>
                        <span class="name">
                            <b>
                                <span class="modifier">Public</span>
                            user</b>
                            <a href="#user"><span class="icon ion-ios-link"></span></a>
                        </span>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                            <i>Type : </i>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>

                        </td>
                    </tr>
                        <tr>
                            <td class="col-md-4">
                                    <div class="io-line">Defined in <a href="" data-line="803" class="link-to-prism">src/app/models/project.ts:803</a></div>
                            </td>
                        </tr>


            </tbody>
        </table>
</section>

            <section>
    
    <h3 id="methods">
        Methods
    </h3>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="make"></a>
                    <span class="name">
                        <b>
                            <span class="modifier">Static</span>
                            make
                        </b>
                        <a href="#make"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>make(data: <a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank">any</a>)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="810"
                            class="link-to-prism">src/app/models/project.ts:810</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">

                    <div class="io-description">
                        <b>Parameters :</b>
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>data</td>
                                    <td>
                                                <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >any</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="../classes/Authentication.html" target="_self" >Authentication</a></code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</section>





    </div>


    <div class="tab-pane fade  tab-source-code" id="c-source">
        <pre class="line-numbers compodoc-sourcecode"><code class="language-typescript">import { APIDefinition }                        from &#x27;../models/wm-package-info&#x27;
import { Source }                               from &#x27;../models/git-source&#x27;;
import { DockerImage, TestStatus }              from &#x27;../models/docker-image&#x27;;

export class DeploymentSet {

  public id: string;
  public name: string;
  public source: Source;
  public active: string;
  public apis: APIDefinition[];

  public constructor() {
      this.apis &#x3D; [];
      this.source &#x3D; new Source();
  }

  public static make(data: any): DeploymentSet {

      let p: DeploymentSet &#x3D; new DeploymentSet();
      p.id &#x3D; data.name;
      p.name &#x3D; data.name;

      if (data.source)
       p.source &#x3D; Source.make(data.source);

      p.apis &#x3D; [];

      if (data.apis) {

        data.apis.forEach((a) &#x3D;&gt; {
          p.apis.push(APIDefinition.make(a));
        });
      }

      return p;
  }
}

export enum DisplayType {
  hidden &#x3D; &quot;hidden&quot;,
  readonly &#x3D; &quot;readonly&quot;,
  editable &#x3D; &quot;editable&quot;,
  password &#x3D; &quot;password&quot;,
  file &#x3D; &quot;file&quot;,
  dropdown &#x3D; &quot;dropdown&quot;,
  yesno &#x3D; &quot;yesno&quot;
}

export class BuildCommand {

  public commandType: string;
  public buildTarget: string;
  public fileType: string;
  public source: string;
  public target: string;
  public description: string &#x3D; &quot;&quot;;
  public display: DisplayType &#x3D; DisplayType.hidden;
  public required: boolean &#x3D; true;
  public conditions: string[];

  public static make(d: any): BuildCommand {

    let f: BuildCommand &#x3D; new BuildCommand();
    f.commandType &#x3D; d.commandType;
    f.buildTarget &#x3D; d.buildTarget;
    f.fileType &#x3D; d.fileType;
    f.source &#x3D; d.source;
    f.target &#x3D; d.target;
    f.description &#x3D; d.description;
    f.conditions &#x3D; d.conditions;

    if (d.display &#x3D;&#x3D; &quot;editable&quot;)
      f.display &#x3D; DisplayType.editable;
    else if (d.display &#x3D;&#x3D; &quot;readonly&quot;)
      f.display &#x3D; DisplayType.readonly;
    else if (d.display &#x3D;&#x3D; &quot;file&quot;)
      f.display &#x3D; DisplayType.file;
    else
      f.display &#x3D; DisplayType.hidden;

    f.required &#x3D; false;
    return f;
  }

  copy() {
    return BuildCommand.make(this);
  }

  public equals(b: BuildCommand): boolean {

    return (b.source &amp;&amp; b.source &#x3D;&#x3D; this.source) || (!b.source &amp;&amp; b.target &#x3D;&#x3D; this.target);
  }

  public matchConditions(args: Map&lt;string, string&gt;): boolean {

    return ArgDisplayType._matchConditions(this.conditions, args);
  }
}

export interface BuildParams {

  name: string;
  publicPort(): string;
  setPublicPort(port: string);
  assignedLicense(): string;
  hostName: string;
  entryPoint: string;
  exitPoint: string;
  healthCheck: string;
  args: Map&lt;string, string&gt;
  buildCommands: BuildCommand[];

  fileForType(type: string): BuildCommand;
  isCustomImage(): boolean;
}

export class ArgDisplayType {

  public name: string;
  public description: string;
  public display: DisplayType &#x3D; DisplayType.hidden;
  public conditions: string[];
  public choices: string[];
  public required: boolean &#x3D; true;

  public constructor(name: string) {
    this.name &#x3D; name;
    this.description &#x3D; this.name;
    this.conditions &#x3D; [];
    this.choices &#x3D; [];
  }

  public copy(): ArgDisplayType {

      let copy: ArgDisplayType &#x3D; new ArgDisplayType(this.name);
      copy.description &#x3D; this.description;
      copy.display &#x3D; this.display;
      copy.conditions &#x3D; this.conditions;
      copy.choices &#x3D; this.choices;
      copy.required &#x3D; this.required;

      return copy;
  }

  public static make(d: any): ArgDisplayType {

    let a: ArgDisplayType &#x3D; new ArgDisplayType(d.name);

    if (d.display &#x3D;&#x3D; &quot;editable&quot;)
      a.display &#x3D; DisplayType.editable;
    else if (d.display &#x3D;&#x3D; &quot;readonly&quot;)
      a.display &#x3D; DisplayType.readonly;
    else if (d.display &#x3D;&#x3D; &quot;file&quot;)
      a.display &#x3D; DisplayType.file;
    else if (d.display &#x3D;&#x3D; &quot;password&quot;)
      a.display &#x3D; DisplayType.password;
    else if (d.display &#x3D;&#x3D; &quot;yesno&quot;)
      a.display &#x3D; DisplayType.yesno;
    else if (d.display &#x3D;&#x3D; &quot;dropdown&quot;)
      a.display &#x3D; DisplayType.dropdown;
    else
      a.display &#x3D; DisplayType.hidden;

    if (d.required !&#x3D; null)
      a.required &#x3D; d.required;

    a.description &#x3D; d.description || d.name;

    if (d.conditions)
      a.conditions &#x3D; d.conditions;

    if (a.choices)
      a.choices &#x3D; d.choices;

    return a;
  }

  public matchConditions(args: Map&lt;string, string&gt;): boolean {

      return ArgDisplayType._matchConditions(this.conditions, args);
  }

  public static _matchConditions(conditions: string[], args: Map&lt;string, string&gt;): boolean {

      if (conditions &amp;&amp; conditions.length &gt; 0) {

        let matched: boolean &#x3D; false;

        for (let i &#x3D; 0; i &lt; conditions.length; i++) {
          let m: string &#x3D; conditions[i];

          if (m.indexOf(&quot;&#x3D;&#x3D;&quot;) !&#x3D; -1) {
            let k: string &#x3D; m.substring(0, m.indexOf(&quot;&#x3D;&#x3D;&quot;));
            let v: string &#x3D; m.substring(m.indexOf(&quot;&#x3D;&#x3D;&quot;)+2);

            if (args.get(k) &#x3D;&#x3D; v || (v &#x3D;&#x3D; &quot;false&quot; &amp;&amp; !args.get(k)))
              matched &#x3D; true;

          } else if (m.indexOf(&quot;!&#x3D;&quot;) !&#x3D; -1) {
            let k: string &#x3D; m.substring(0, m.indexOf(&quot;!&#x3D;&quot;));
            let v: string &#x3D; m.substring(m.indexOf(&quot;!&#x3D;&quot;)+2);

            if (args.get(k) !&#x3D; v)
              matched &#x3D; true;

          } else if (args.get(m) &amp;&amp; args.get(m) !&#x3D; &quot;false&quot;)
            matched &#x3D; true;
        }

        return matched;
      } else {
        return true;
      }
  }
}

export class Arg {

  public display: DisplayType &#x3D; DisplayType.hidden;
  public conditions: string[];
  public choices: string[];

  constructor(public source: string, public target: string, public description: string) {

  }

  public static makeArray(array: any[]): Arg[] {

    let args: Arg[] &#x3D; [];

    array.forEach((a) &#x3D;&gt; {
      args.push(new Arg(a.source, a.target, a.description));
    });

    return args;
  }

}

export class Installer implements BuildParams {

    public name: string;
    public sourceImageTag: string;
    public isNew: string &#x3D; &quot;true&quot;;
    public targetImage: DockerImage;
    public productType: string;
    public licenseFile: string;
    public primaryPort: string;
    public hostName: string;
    public wmInstallerImage: string;
    public includeUpdate: string &#x3D; &quot;false&quot;;
    public buildCommands: BuildCommand[];
    public args: Map&lt;string, string&gt;;
    public isSAGProduct: string &#x3D; &quot;true&quot;;

    public entryPoint: string;
    public exitPoint: string;
    public healthCheck: string;

    public constructor() {

    this.sourceImageTag &#x3D; &quot;centos:latest&quot;;
    this.targetImage &#x3D; new DockerImage();
    this.buildCommands &#x3D; [];
    this.args &#x3D; new Map&lt;string, string&gt;();
  }

  public copy(): Installer {

    return Installer.make(this);
  }

  public static parse(data: string): Installer {

    return this.make(JSON.parse(data, parserReviver).install);
  }

  public isCustomImage(): boolean {
    return true;
  }

  public static make(data: any): Installer {

    let i: Installer &#x3D; new Installer();
    i.name &#x3D; data.name;
    i.isSAGProduct &#x3D; data.isSAGProduct;
    i.args &#x3D; data.args;
    i.productType &#x3D; data.productType;
    i.wmInstallerImage &#x3D; data.wmInstallerImage;
    i.sourceImageTag &#x3D; data.sourceImageTag;

    if (data.targetImage)
      i.targetImage &#x3D; DockerImage.make(data.targetImage);

    i.licenseFile &#x3D; data.licenseFile;
    i.primaryPort &#x3D; data.primaryPort;
    i.isNew &#x3D; data.isNew;
    i.includeUpdate &#x3D; data.includeUpdate;
    i.hostName &#x3D; data.hostName;
    i.entryPoint &#x3D; data.entryPoint;
    i.exitPoint &#x3D; data.exitPoint;
    i.healthCheck &#x3D; data.healthCheck;
    i.healthCheck &#x3D; data.healthCheck;

    if (!i.args)
       i.args &#x3D; new Map&lt;string, string&gt;();

    if (data.buildCommands) {
      data.buildCommands.forEach((f) &#x3D;&gt; {
        i.buildCommands.push(BuildCommand.make(f));
      });
    }

    return i;
  }

  public publicPort(): string {
    return this.primaryPort;
  }

  public setPublicPort(port: string) {
    this.primaryPort &#x3D; port;
  }

  public assignedLicense(): string {

    return this.licenseFile;
  }

  public fileForType(type: string, name?: string): BuildCommand {

      return Builder._fileForSource(this.buildCommands, type, name, null);
  }

  public fileWithDescription(type: string, description: string): BuildCommand {
      return Builder._fileForSource(this.buildCommands, type, null, description);
  }

  public removeFileForType(type: string, name?: string) {

      return Builder._removeFileForType(this.buildCommands, type, name);
  }

  public toString(): string {
    return JSON.stringify(this, stringifyReplacer);
  }
}

export class Builder implements BuildParams {

  public name: string;
  public deploymentType: string;
  public deployments: DeploymentSet[];

  public sourceImage: DockerImage;
  public targetImage: DockerImage;
  public version: string;
  public testStatus: string;
  public buildCommands: BuildCommand[];
  public hasTests: string;
  public buildUser: string;
  public entryUser: string;
  public entryPoint: string;
  public exitPoint: string;
  public healthCheck: string;
  public args: Map&lt;string, string&gt;;

  public hostName: string; // not used!!

  public constructor() {

    this.sourceImage &#x3D; new DockerImage();
    this.targetImage &#x3D; new DockerImage();
    this.buildCommands &#x3D; [];

    this.args &#x3D; new Map&lt;string, string&gt;();
  }

  public hyphenatedName(): string {

    return this.name.toLowerCase().replace(/\s/g, &quot;-&quot;);
  }

  public static make(data: any): Builder {

    let b: Builder &#x3D; new Builder();
    b.name &#x3D; data.name;
    b.deploymentType &#x3D; data.type;

    b.deployments &#x3D; [];

    if (data.deployments) {
      data.deployments.forEach((d) &#x3D;&gt; {
            b.deployments.push(DeploymentSet.make(d));
      });
    }

    if (data.buildCommands) {
      data.buildCommands.forEach((f) &#x3D;&gt; {
            b.buildCommands.push(BuildCommand.make(f));
      });
    }

    b.sourceImage &#x3D; DockerImage.make(data.sourceImage);
    b.targetImage &#x3D; DockerImage.make(data.targetImage);
    b.version &#x3D; data.version;
    b.testStatus &#x3D; data.testStatus;
    b.buildUser &#x3D; data.buildUser;
    b.entryUser &#x3D; data.entryUser;
    b.entryPoint &#x3D; data.entryPoint;
    b.exitPoint &#x3D; data.exitPoint;
    b.healthCheck &#x3D; data.healthCheck;

    if (data.hasTests &amp;&amp; data.hasTests &#x3D;&#x3D; &#x27;true&#x27;)
      b.hasTests &#x3D; &quot;true&quot;;

    return b;
  }

  public publicPort(): string {
    return this.sourceImage.primaryPort;
  }

  public setPublicPort(port: string) {
    this.sourceImage.primaryPort &#x3D; port;
  }

  public assignedLicense(): string {

    let lic: BuildCommand &#x3D; this.fileWithDescription(&quot;licenses&quot;,&#x27;Product License&#x27;);

    if (lic) {
      return lic.target.replace(/\-/g, &quot; &quot;);
    } else {
      return null;
    }
  }

  public isCustomImage(): boolean {
    return this.sourceImage.isCustom;
  }

  public fileForType(type: string, name?: string): BuildCommand {
      return Builder._fileForSource(this.buildCommands, type, name, null);
  }

  public fileWithDescription(type: string, description: string): BuildCommand {
      return Builder._fileForSource(this.buildCommands, type, null, description);
  }

  public removeFileForType(type: string, name?: string) {

      return Builder._removeFileForType(this.buildCommands, type, name);
  }

  public static _fileForSource(buildCommands: BuildCommand[], type: string, name: string, description: string): BuildCommand {

      let file: BuildCommand &#x3D; null;

      for (var i &#x3D; 0; i &lt; buildCommands.length; i++) {

        let f: BuildCommand &#x3D; buildCommands[i];

        if (f.fileType &#x3D;&#x3D; type &amp;&amp; (!name || name &#x3D;&#x3D; f.source) &amp;&amp; (!description || description &#x3D;&#x3D; f.description)) {
          file &#x3D; f;
        }
      }

      return file;
  }

  public static _removeFileForType(buildCommands: BuildCommand[], type: string, name?: string) {

      let s: number &#x3D; -1;

      for (var i &#x3D; 0; i &lt; buildCommands.length; i++) {

        let f: BuildCommand &#x3D; buildCommands[i];

        if (f.fileType &#x3D;&#x3D; type &amp;&amp; (!name || name &#x3D;&#x3D; f.source)) {
          s &#x3D; 0;
        }
      }

      if (s !&#x3D; -1) {

        buildCommands.splice(s,1);
      }
  }
}

export class DockerBuild {

  public context: string;
  public dockerfile: string;
  public buildCommands: BuildCommand[];

  constructor(cmd?: BuildCommand) {
    this.buildCommands &#x3D; [];

    if (cmd)
      this.buildCommands.push(cmd);
  }

  public static make(data: any): DockerBuild {

     let d: DockerBuild &#x3D; new DockerBuild();

     d.dockerfile &#x3D; data.dockerfile;
     d.context &#x3D; data.context;

     if (data.buildCommands) {
       data.buildCommands.forEach((b) &#x3D;&gt; {
         d.buildCommands.push(BuildCommand.make(b));
       });
     }

     return d;
  }
}

export class Port {

  public publicPort: string;
  public serviceType: string;

  constructor(public internal: string, public external: string, public description: string, public type?: string) {

  }

  public static makeArray(array: any[]): Port[] {

    let ports: Port[] &#x3D; [];

    array.forEach((p) &#x3D;&gt; {
      let port: Port &#x3D; new Port(p.internal, p.external, p.description, p.type);
      port.publicPort &#x3D; p.publicPort;
      port.serviceType &#x3D; p.serviceType;

      ports.push(port);
    });

    return ports;
  }
}

export class Probe {

  public path: string;
  public port: string;
  public initialDelaySeconds: number;
  public periodSeconds: number;
  public timeoutSeconds: number;

  public static make(data: any): Probe {

    let p &#x3D; new Probe();
    p.path &#x3D; data.path;
    p.port &#x3D; data.port;
    p.initialDelaySeconds &#x3D; Number(data.initialDelaySeconds);
    p.periodSeconds &#x3D; Number(data.periodSeconds);
    p.timeoutSeconds &#x3D; Number(data.timeoutSeconds);

    return p;
  }
}

export class Container {

  public name: string;
  public names: string[];
  public active: string;
  public type: string;
  public description: string;
  public hostname: string;
  public secure: string;
  public image: string;
  public build: DockerBuild;
  public ports: Port[];
  public env: Arg[];
  public volumes: Arg[];
  public readinessProbe;
  public livenessProbe;
  public testStatus : TestStatus;
  public adminUser: string;
  public adminPassword: string;

  // runtime only

  public id: string;
  public state: string;
  public status: string;
  public created: Date;

  constructor() {

    this.active &#x3D; &quot;true&quot;;
    this.ports &#x3D; [];
    this.env &#x3D; [];
    this.volumes &#x3D; [];
  }

  public copy() {
    return Container.make(this);
  }

  public uniqueName(usesDedicatedRepo: boolean): string {

    let repo: string &#x3D; this.repository();

    if (repo)
      return repo + (usesDedicatedRepo ? &quot;/&quot; : &quot;:&quot;) + this.imageName();
    else
      return this.imageName();
  }

  public repository(): string {

    if (this.image.indexOf(&quot;:&quot;) !&#x3D; -1) {

      return this.image.substring(0, this.image.indexOf(&quot;:&quot;));
    } else {
      return null;
    }
  }

  public imageName(): string {

    let name: string &#x3D; this.image;

    let idx: number &#x3D; name.indexOf(&quot;:&quot;);

    if (idx !&#x3D; -1) {

      let lside &#x3D; name.substring(0, idx);
      let rside &#x3D; name.substring(idx+1);

      if (DockerImage.isVersionNumber(rside)) {

        // name is on left side

         if (this.image.lastIndexOf(&quot;/&quot;) !&#x3D; -1) {
          let idx: number &#x3D; this.image.lastIndexOf(&quot;/&quot;);
          let rdx: number &#x3D; this.image.indexOf(&quot;:&quot;);

          name &#x3D; this.image.substring(idx+1, rdx);
        }
      } else {

        // name and perhaps version is in right side

        name &#x3D; rside;

        if (name.indexOf(&quot;-&quot;) !&#x3D; -1) {

          let idx: number &#x3D; name.lastIndexOf(&quot;-&quot;);
          let b4: string &#x3D; name.substring(0, idx);
          let af: string &#x3D; name.substring(idx+1, name.length);

          if (DockerImage.isVersionNumber(af)) {
            name &#x3D; b4;
          }
        }
      }
    }

    return name;
  }

  public preferredImageVersion(): string {

    if (this.image &amp;&amp; this.image.indexOf(&quot;:&quot;)) {

      let version: string &#x3D; this.image.substring(this.image.indexOf(&quot;:&quot;)+1, this.image.length);

      if (version.indexOf(&quot;-&quot;) !&#x3D; -1) {
        let idx: number &#x3D; version.lastIndexOf(&quot;-&quot;);
        version &#x3D; version.substring(idx+1, version.length);
      }

      // no versioning, only a name

      if (!DockerImage.isVersionNumber(version))
          version &#x3D; &quot;latest&quot;;

      return version;
    } else {

      return &quot;latest&quot;;
    }
  }

  public static make(data: any): Container {

    let c: Container &#x3D; new Container();
    c.names &#x3D; data.names;
    if (data.names)
      c.name &#x3D; data.names[0];
    else
      c.name &#x3D; data.name;

    c.active &#x3D; data.active;
    c.description &#x3D; data.description;
    c.hostname &#x3D; data.hostname;
    c.secure  &#x3D; data.secure;
    c.image &#x3D; data.image;
    c.type &#x3D; data.type;
    c.adminUser &#x3D; data.adminUser;
    c.adminPassword &#x3D; data.adminPassword;

    if (data.build)
      c.build &#x3D; DockerBuild.make(data.build);

    if (data.ports)
      c.ports &#x3D; Port.makeArray(data.ports);

    if (data.env)
      c.env &#x3D; Arg.makeArray(data.env);

    if (data.volumes)
      c.volumes &#x3D; Arg.makeArray(data.volumes);

    if (data.readinessProbe)
      c.readinessProbe &#x3D; Probe.make(data.readinessProbe);

    if (data.livenessProbe)
      c.livenessProbe &#x3D; Probe.make(data.livenessProbe);

    return c;
  }

  public environmentVariable(id: string): Arg {

    var arg: Arg &#x3D; null;

    for (var i &#x3D; 0; i &lt; this.env.length; i++) {

      if (this.env[i].source &#x3D;&#x3D; id) {
        arg &#x3D; this.env[i];
        break;
      }
    }

    return arg;
  }

  fileForType(type: string, name?: string) {

    let file: BuildCommand &#x3D; null;

      for (var i &#x3D; 0; i &lt; this.build.buildCommands.length; i++) {

        let f: BuildCommand &#x3D; this.build.buildCommands[i];

        if (f.fileType &#x3D;&#x3D; type &amp;&amp; (!name || name &#x3D;&#x3D; f.source || name &#x3D;&#x3D; f.description)) {
          file &#x3D; f;
        }
      }

      return file;
  }

  public argumentFor(name: string): Arg {

    let found: Arg &#x3D; null;

    for (let i &#x3D; 0; i &lt; this.env.length; i++) {

      if (name &#x3D;&#x3D; this.env[i].source) {
        found &#x3D; this.env[i];
        break;
      }
    }

    return found;
  }
}

export class Test {

  public package: string;
  public cases: string[];

  constructor() {

  }

  public static make(data: any): Test {

    let t: Test &#x3D; new Test();

    t.package &#x3D; data.package;
    t.cases &#x3D; data.cases;

    return t;
  }
}

export class Authentication {

  public type: string;
  public user: string;
  public password: string;

  constructor() {

  }

  public static make(data: any): Authentication {

    let t: Authentication &#x3D; new Authentication();

    if (data.type)
      t.type &#x3D; data.type;
    else
      t.type &#x3D; &quot;Basic&quot;;

    t.user &#x3D; data.user;
    t.password &#x3D; data.password;

    return t;
  }
}

export class Server {

  public name: string;
  public authentication: Authentication;

  constructor() {

  }

  public static make(data: any): Server {

    let t: Server &#x3D; new Server();

    t.name &#x3D; data.name;

    if (data.authentication)
      t.authentication &#x3D; Authentication.make(data.authentication);

    return t;
  }
}

export class Action {

  public active: string;
  public apiDeployType: string;
  public apiStage: string;
  public apiMaturity: string;
  public runTests: string;
  public dockerAction: string;
  public dockerTag: string;
  public tests: Test[];
  public stop: string;
  public pipelineAction: string;

  constructor() {
    this.runTests &#x3D; &quot;false&quot;;
    this.stop &#x3D; &quot;false&quot;;
    this.active &#x3D; &quot;false&quot;;
  }

  public static make(data: any): Action {

    let s: Action &#x3D; new Action();

    s.active &#x3D; data.active;
    s.apiStage &#x3D; data.name;
    s.apiDeployType &#x3D; data.apiDeployType;
    s.apiStage &#x3D; data.apiStage;
    s.apiMaturity &#x3D; data.apiMaturity;
    s.runTests &#x3D; data.runTests;
    s.dockerAction &#x3D; data.dockerAction;
    s.dockerTag &#x3D; data.dockerTag;
    s.pipelineAction &#x3D; data.stopOnFail;

    s.stop &#x3D; data.stop;

    if (data.tests) {
        data.tests.forEach((t) &#x3D;&gt; {
          s.tests.push(Test.make(t));
        });
    }

    return s;
  }

  public isActive(): boolean {

    return (this.apiDeployType !&#x3D; &quot;none&quot; &amp;&amp; this.apiDeployType !&#x3D; null) || this.stop &#x3D;&#x3D; &quot;true&quot; || (this.apiMaturity !&#x3D; &quot;none&quot; &amp;&amp;  this.apiMaturity !&#x3D; null) ||
                  (this.dockerAction !&#x3D; &quot;none&quot;  &amp;&amp; this.dockerAction !&#x3D; null) || this.dockerTag !&#x3D; null || this.stop !&#x3D; null;
  }

  public summary(): string {

      var status: string &#x3D; null;

      if (this.apiDeployType &#x3D;&#x3D; &quot;deploy&quot;)
          status &#x3D; &quot;Deploy API&#x27;s &quot;;
      else if (this.apiDeployType &#x3D;&#x3D; &quot;promote&quot;)
        status &#x3D; &quot;Promote API&#x27;s to &quot; + this.apiStage;

      if (this.runTests &#x3D;&#x3D; &quot;true&quot;) {

        if (status !&#x3D; null)
          status &#x3D; status + &quot;, run tests&quot;;
        else
          status &#x3D; &quot;Run tests&quot;;
      }

      if (this.apiMaturity) {

        if (status !&#x3D; null)
            status &#x3D; status + &quot;, and set maturity to &quot; + this.apiMaturity;
        else
          status &#x3D; &quot;Set maturity to &quot; + this.apiMaturity;
      }

      if (this.dockerTag) {

        if (status !&#x3D; null)
          status &#x3D; status + &quot;, then tag image&quot;;
        else
          status &#x3D; &quot;Tag image &quot;;
      }

      if (this.dockerAction) {
        if (status !&#x3D; null)
          status &#x3D; status + &quot;, &quot; + this.dockerAction;
        else
          status &#x3D; this.dockerAction;

        status &#x3D; status + &quot; image&quot;;
      }

      if (this.stop &#x3D;&#x3D; &quot;true&quot;) {
        if (status !&#x3D; null)
            status &#x3D; status + &quot; before stopping&quot;;
        else
            status &#x3D; &quot;stop containers&quot;;
      }

      if (this.pipelineAction) {

        if (status !&#x3D; null)
            status &#x3D; status + &quot;, then &quot; + this.pipelineAction + &quot; pipeline&quot;;
        else
            status &#x3D; &quot;and &quot; + this.pipelineAction + &quot; pipeline execution&quot;;
      }

      return status;
    }
}

export class Stage {

    public id: string;
    public name: string;
    public containerHost: string;
    public useKubernetes: string;
    public buildOnStart: string;
    public deployments: Deployment[];
    public onStart: Action;
    public onFail: Action;
    public onSuccess: Action;

    constructor() {
      this.deployments &#x3D; [];
      this.useKubernetes &#x3D; &quot;false&quot;;
      this.buildOnStart &#x3D; &quot;false&quot;;
      this.onStart &#x3D; new Action();
      this.onSuccess &#x3D; new Action();
      this.onFail &#x3D; new Action();
    }

    public copy(): Stage {

      let c &#x3D; Stage.make(this);

      c.id &#x3D; this.id + &quot; copy&quot;;
      c.name &#x3D; this.name + &quot; copy&quot;;

      return c;
    }

    public static make(data: any): Stage {

      let s: Stage &#x3D; new Stage();

      s.name &#x3D; data.name;
      s.id &#x3D; s.name;
      s.containerHost &#x3D; data.containerHost;
      s.useKubernetes &#x3D; data.useKubernetes;
      s.buildOnStart &#x3D; data.buildOnStart;

      if (data.deployments) {
        data.deployments.forEach((c) &#x3D;&gt; {
          s.deployments.push(Deployment.make(c));
        });
      }

      if (data.onStart) {
        s.onStart &#x3D; Action.make(data.onStart);
      }

      if (data.onSuccess) {
        s.onSuccess &#x3D; Action.make(data.onSuccess);
      }

      if (data.onFail) {
        s.onFail &#x3D; Action.make(data.onFail);
      }

      return s;
    }
}

export class Deployment {

  public name: string;
  public hostname: string;
  public appName: string;
  public apis: APIDefinition[];
  public containers: Container[];
  public replicas: string;
  public serviceType: string;
  public restartPolicy: string;
  public requiresMonitoring: string;
  public dependsOn: string;

  constructor() {

    this.containers &#x3D; [];
    this.apis &#x3D; [];
  }

  public copy() {
    return Deployment.make(this);
  }

  public static make(data: any): Deployment {

    let s: Deployment &#x3D; new Deployment();
    s.name &#x3D; data.name;
    s.hostname &#x3D; data.hostname;
    s.replicas &#x3D; data.replicas;
    s.appName &#x3D; data.appName;
    s.serviceType &#x3D; data.serviceType;
    s.restartPolicy &#x3D; data.restartPolicy;
    s.requiresMonitoring &#x3D; data.requiresMonitoring;
    s.dependsOn &#x3D; data.dependsOn;

    if (data.apis) {
       data.apis.forEach((a) &#x3D;&gt; {
         s.apis.push(APIDefinition.make(a));
       });
    }

    if (data.containers) {
       data.containers.forEach((c) &#x3D;&gt; {
         s.containers.push(Container.make(c));
       });
    }

    return s;
  }

  public containerForType(type: string): Container {

    let found: Container &#x3D; null;

    this.containers.forEach((c) &#x3D;&gt; {

      if (c.type &#x3D;&#x3D; type) {
        found &#x3D; c;
      }
    });

    return found;
  }

  public removeContainer(c: Container) {

    var found : number &#x3D; -1;

    for (var i &#x3D; 0; i &lt; this.containers.length; i++) {
      if (c.name &#x3D;&#x3D; this.containers[i].name) {
        found &#x3D; i;
        break;
      }
    }
    if (found !&#x3D; -1) {
      this.containers.splice(found, 1);
    }
  }

  public removeAPI(a: APIDefinition) {

    var found : number &#x3D; -1;

    for (var i &#x3D; 0; i &lt; this.apis.length; i++) {
      if (a.name &#x3D;&#x3D; this.apis[i].name) {
        found &#x3D; i;
        break;
      }
    }
    if (found !&#x3D; -1) {
      this.apis.splice(found, 1);
    }
  }
}

export class RunSet {

  public name: string;
  public builds: Builder[];
  public deployments: Deployment[];

  public namespace: string;
  public useKubernetes: string;
  public description: string;
  public type: string;

  public constructor() {

    this.builds &#x3D; [];

    this.builds.push(new Builder());

    this.deployments &#x3D; [];
  }

  public static make(data: any): RunSet {

     let p: RunSet &#x3D; new RunSet();
     p.name &#x3D; data.name;
     p.useKubernetes &#x3D; data.useKubernetes;
     p.namespace &#x3D; data.namespace;
     p.description &#x3D; data.description;
     p.type &#x3D; data.type;

     if (data.builds) {
       p.builds &#x3D; [];
       data.builds.forEach((i) &#x3D;&gt; {
         p.builds.push(Builder.make(i));
       });
    }

    if (data.deployments) {
      p.deployments &#x3D; [];
       data.deployments.forEach((i) &#x3D;&gt; {
         p.deployments.push(Deployment.make(i));
       });
    }

    return p;
  }

  public serviceFor(id: string): Deployment {

      let found: Deployment &#x3D; null;

      for (var z &#x3D; 0; z &lt; this.deployments.length; z++ ) {

        let service: Deployment &#x3D; this.deployments[z];

        if (service.name &#x3D;&#x3D; id) {
          found &#x3D; service;
          break;
        }
      }

      return found;
  }

  public deploymentForContainer(container: Container) : Deployment {

      let found: Deployment &#x3D; null;

      for (var z &#x3D; 0; z &lt; this.deployments.length; z++ ) {

        if (this.deployments[z].containers.indexOf(container) !&#x3D; -1) {
          found &#x3D; this.deployments[z];
          break;
        }
      }

      return found;
  }

  public containerInDeploymentFor(id: string, tag?: string): Container {

      let found: Container &#x3D; null;

      for (var z &#x3D; 0; z &lt; this.deployments.length; z++ ) {

        let service: Deployment &#x3D; this.deployments[z];

        for (var i &#x3D; 0; i &lt; service.containers.length; i++) {

          if (service.containers[i].name.startsWith(id) || service.containers[i].type &#x3D;&#x3D; id ||
            (tag &amp;&amp; service.containers[i].image.indexOf(tag) !&#x3D; -1)) {
              found &#x3D; service.containers[i];
              break;
            }
        }

        if (found)
          break;
      }

      return found;
    }
}

export class Project {

  public name: string;
  public run: RunSet;
  public stages: Stage[];

  public constructor() {

    this.stages &#x3D; [];

    this.run &#x3D; new RunSet();
    this.stages &#x3D; [];
  }

  public static make(data: any): Project {

    let p: Project &#x3D; new Project();
    p.name &#x3D; data.name;

    if (data.run)
      p.run &#x3D; RunSet.make(data.run);

    if (data.stages) {
       data.stages.forEach((s) &#x3D;&gt; {
         p.stages.push(Stage.make(s));
       });
    }

    return p;
  }
}

function stringifyReplacer(key, value) {
  const originalObject &#x3D; this[key];
  if(originalObject instanceof Map) {
    return {
      dataType: &#x27;Map&#x27;,
      value: Array.from(originalObject.entries()), // or with spread: value: [...originalObject]
    };
  } else {
    return value;
  }
}

function parserReviver(key, value) {
  if(typeof value &#x3D;&#x3D;&#x3D; &#x27;object&#x27; &amp;&amp; value !&#x3D;&#x3D; null) {
    if (value.dataType &#x3D;&#x3D;&#x3D; &#x27;Map&#x27;) {
      return new Map(value.value);
    }
  }
  return value;
}
</code></pre>
    </div>
</div>



                   




                   </div><div class="search-results">
    <div class="has-results">
        <h1 class="search-results-title"><span class='search-results-count'></span> result-matching "<span class='search-query'></span>"</h1>
        <ul class="search-results-list"></ul>
    </div>
    <div class="no-results">
        <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
    </div>
</div>
</div>
               <!-- END CONTENT -->
           </div>
       </div>

       <script>
            var COMPODOC_CURRENT_PAGE_DEPTH = 1;
            var COMPODOC_CURRENT_PAGE_CONTEXT = 'class';
            var COMPODOC_CURRENT_PAGE_URL = 'Authentication.html';
            var MAX_SEARCH_RESULTS = 15;
       </script>

       <script src="../js/libs/custom-elements.min.js"></script>
       <script src="../js/libs/lit-html.js"></script>
       <!-- Required to polyfill modern browsers as code is ES5 for IE... -->
       <script src="../js/libs/custom-elements-es5-adapter.js" charset="utf-8" defer></script>
       <script src="../js/menu-wc.js" defer></script>

       <script src="../js/libs/bootstrap-native.js"></script>

       <script src="../js/libs/es6-shim.min.js"></script>
       <script src="../js/libs/EventDispatcher.js"></script>
       <script src="../js/libs/promise.min.js"></script>
       <script src="../js/libs/zepto.min.js"></script>

       <script src="../js/compodoc.js"></script>

       <script src="../js/tabs.js"></script>
       <script src="../js/menu.js"></script>
       <script src="../js/libs/clipboard.min.js"></script>
       <script src="../js/libs/prism.js"></script>
       <script src="../js/sourceCode.js"></script>
          <script src="../js/search/search.js"></script>
          <script src="../js/search/lunr.min.js"></script>
          <script src="../js/search/search-lunr.js"></script>
          <script src="../js/search/search_index.js"></script>
       <script src="../js/lazy-load-graphs.js"></script>


    </body>
</html>
